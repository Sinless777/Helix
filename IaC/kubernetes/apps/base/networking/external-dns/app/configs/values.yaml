# external-dns values – Helix Platform Networking
provider:
  name: cloudflare
  cloudflare:
    # Optional: enable proxying of records via Cloudflare
    proxied: false
    # Optional: number of records to request per page (throttling control for Cloudflare)
    dnsRecordsPerPage: 5000
domainFilters:
  - ${DOMAIN_1}
  - ${DOMAIN_2}
  - ${DOMAIN_3}
txtOwnerId: helix-external-dns    # unique owner ID for TXT records conflict-avoidance
registry: txt                      # use “txt” registry for ownership tracking
logLevel: info
extraArgs:
  - --interval=1m
  - --source=ingress
  - --source=service
  - --source=dnsendpoint
  - --cloudflare-zone-id-filter=${CLOUDFLARE_ZONE_ID}  # restrict to specific zone(s)
  - --policy=sync
  - --txt-prefix=helix
  - --txt-encrypt-enabled=true        # enable TXT encryption for extra security
env:
  - name: CF_API_TOKEN
    valueFrom:
      secretKeyRef:
        name: external-dns-cloudflare-token
        key: apiToken
resources:
  requests:
    cpu: "100m"
    memory: "128Mi"
  limits:
    cpu: "300m"
    memory: "512Mi"
nodeSelector:
  kubernetes.io/os: linux
tolerations:
  - key: "node-role.kubernetes.io/control-plane"
    operator: Exists
    effect: NoSchedule
affinity:
  podAntiAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchLabels:
            app.kubernetes.io/name: external-dns
        topologyKey: kubernetes.io/hostname
